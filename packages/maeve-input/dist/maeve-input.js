!function(global,factory){if("function"==typeof define&&define.amd)define(["exports","react","prop-types","maeve/packages/maeve-dropdown","lodash/debounce","./maeve-input-style.js"],factory);else if("undefined"!=typeof exports)factory(exports,require("react"),require("prop-types"),require("maeve/packages/maeve-dropdown"),require("lodash/debounce"),require("./maeve-input-style.js"));else{var mod={exports:{}};factory(mod.exports,global.react,global.propTypes,global.maeveDropdown,global.debounce,global.maeveInputStyle),global.maeveInput=mod.exports}}(this,function(exports,_react,_propTypes,_maeveDropdown,_debounce,_maeveInputStyle){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(_react),_propTypes2=_interopRequireDefault(_propTypes),_maeveDropdown2=_interopRequireDefault(_maeveDropdown),_debounce2=_interopRequireDefault(_debounce),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),MaeveInput=function(_React$Component){function MaeveInput(props){_classCallCheck(this,MaeveInput);var _this=_possibleConstructorReturn(this,(MaeveInput.__proto__||Object.getPrototypeOf(MaeveInput)).call(this,props));return _this.filterResults=function(item,query){return 0===_this.autoCompleteTrigger?item:item.toLowerCase().includes(query.toLowerCase())},_this.handleChange=function(event){var updatedValue=event.target.value,updatedAutocompleteSuggestions=[];void 0!==_this.props.autocomplete&&void 0!==_this.props.autocomplete.source&&!0===_this.props.autocomplete.search&&(updatedAutocompleteSuggestions=_this.props.autocomplete.source.filter(function(item){return _this.filterResults(item,updatedValue)})),_this.updateValue({currentValue:updatedValue,autocompleteSuggestions:updatedAutocompleteSuggestions})},_this.updateValue=function(newState){_this.setState(newState),_this.valueChangeCallback(newState)},_this.valueChangeCallback=function(newState){if(void 0!==_this.props.onValueUpdate){var valueId=!0===_this.props.multi?_this.props.valueId:_this.props.id;_this.props.onValueUpdate(newState.currentValue,valueId)}},_this.onItemSelect=function(currentValue,event){event.stopPropagation(),_this.updateValue({currentValue:currentValue,autocompleteSuggestions:[]}),_this.setFocus(!1)},_this.onAddNewItem=function(){var valueId=!0===_this.props.multi?_this.props.valueId:_this.props.id;_this.props.autocomplete.addNewItem(_this.state.value,valueId),_this.setFocus(!1)},_this.setFocus=function(isFocus){!0===isFocus?window.addEventListener("click",_this.onPageClick,!1):window.removeEventListener("click",_this.onPageClick,!1),_this.setState({isFocus:isFocus})},_this.onPageClick=function(event){event.target.id!==_this.props.id&&_this.setFocus(!1)},_this.state={currentValue:props.value||"",isFocus:!1,autocompleteSuggestions:[]},_this.valueChangeCallback=(0,_debounce2.default)(_this.valueChangeCallback,props.debounceTime||20),_this}return _inherits(MaeveInput,_React$Component),_createClass(MaeveInput,[{key:"componentWillReceiveProps",value:function(newProps){void 0!==newProps.value&&newProps.value!==this.state.currentValue&&this.setState({currentValue:newProps.value})}},{key:"getDropdown",value:function(){var dropdown="",autocomplete=this.props.autocomplete;if(void 0!==autocomplete&&!0===this.state.isFocus&&(void 0===autocomplete.trigger||autocomplete.trigger<=this.state.value.length)){var source=autocomplete.source;!0===autocomplete.search&&(source=this.state.autocompleteSuggestions);var dropdownProps={items:source,onSelect:this.onItemSelect};void 0!==autocomplete.addNewItem&&(dropdownProps.addNewItem=this.onAddNewItem),dropdown=_react2.default.createElement(_maeveInputStyle.DropdownWrapper,null,_react2.default.createElement(_maeveDropdown2.default,dropdownProps))}return dropdown}},{key:"render",value:function(){var inputProps={value:this.state.currentValue,onChange:this.handleChange,onFocus:this.setFocus.bind(null,!0)},dropdown="",autocomplete=this.props.autocomplete;if(void 0!==autocomplete&&!0===this.state.isFocus){0===autocomplete.trigger&&(inputProps.onFocus=this.handleChange),dropdown=this.getDropdown()}var errorMessage=void 0!==this.props.error?_react2.default.createElement(_maeveInputStyle.ErrorMessage,{className:"error"},this.props.error.message):null;inputProps=Object.assign({},this.props,inputProps);var label=void 0!==this.props.label?_react2.default.createElement(_maeveInputStyle.InputLabel,{htmlFor:this.props.id},this.props.label):null,Input=void 0;Input="textarea"===this.props.type?_maeveInputStyle.TextAreaField:_maeveInputStyle.InputField;var FinalComponent=_react2.default.createElement(Input,inputProps);return _react2.default.createElement(_maeveInputStyle.MaeveInputWrapper,null,label,errorMessage,FinalComponent,dropdown,this.props.children)}}]),MaeveInput}(_react2.default.Component);MaeveInput.propTypes={id:_propTypes2.default.string.isRequired,type:_propTypes2.default.string.isRequired,valueId:_propTypes2.default.string,multi:_propTypes2.default.bool,autocomplete:_propTypes2.default.object,label:_propTypes2.default.string,error:_propTypes2.default.object},exports.default=MaeveInput}),function(global,factory){if("function"==typeof define&&define.amd)define(["exports","styled-components"],factory);else if("undefined"!=typeof exports)factory(exports,require("styled-components"));else{var mod={exports:{}};factory(mod.exports,global.styledComponents),global.maeveInputStyle=mod.exports}}(this,function(exports,_styledComponents){"use strict";function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextAreaField=exports.InputField=exports.ErrorMessage=exports.DropdownWrapper=exports.MaeveInputWrapper=exports.InputLabel=void 0;var _styledComponents2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_styledComponents),_templateObject=_taggedTemplateLiteral(["\n  display: inline-block;\n  width: 100%;\n  margin-bottom: 5px;\n  font-size: 16px;\n"],["\n  display: inline-block;\n  width: 100%;\n  margin-bottom: 5px;\n  font-size: 16px;\n"]),_templateObject2=_taggedTemplateLiteral(["\n  position: relative;\n"],["\n  position: relative;\n"]),_templateObject3=_taggedTemplateLiteral(["\n  position: absolute;\n  background: #f8f8f8;\n  z-index: 2;\n  border-radius: 2px;\n"],["\n  position: absolute;\n  background: #f8f8f8;\n  z-index: 2;\n  border-radius: 2px;\n"]),_templateObject4=_taggedTemplateLiteral(["\n  display: inline-block;\n  width: 100%;\n  color: red;\n"],["\n  display: inline-block;\n  width: 100%;\n  color: red;\n"]),_templateObject5=_taggedTemplateLiteral(["\n  width: 100%;\n  height: 32px;\n  border-radius: 2px;\n  border: solid 1px #cccccc;\n  padding: 10px;\n  box-sizing: border-box;\n"],["\n  width: 100%;\n  height: 32px;\n  border-radius: 2px;\n  border: solid 1px #cccccc;\n  padding: 10px;\n  box-sizing: border-box;\n"]),_templateObject6=_taggedTemplateLiteral(["\n  width: 100%;\n  height: 64px;\n  outline: none;\n  border-radius: 2px;\n  border: solid 1px #cccccc;\n  padding: 0px 10px;\n  box-sizing: border-box;\n"],["\n  width: 100%;\n  height: 64px;\n  outline: none;\n  border-radius: 2px;\n  border: solid 1px #cccccc;\n  padding: 0px 10px;\n  box-sizing: border-box;\n"]);exports.InputLabel=_styledComponents2.default.label(_templateObject),exports.MaeveInputWrapper=_styledComponents2.default.div(_templateObject2),exports.DropdownWrapper=_styledComponents2.default.div(_templateObject3),exports.ErrorMessage=_styledComponents2.default.div(_templateObject4),exports.InputField=_styledComponents2.default.input(_templateObject5),exports.TextAreaField=_styledComponents2.default.textarea(_templateObject6)});